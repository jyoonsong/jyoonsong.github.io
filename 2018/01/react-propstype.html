<!DOCTYPE html> <html lang="ko_KR"> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <meta name="keyword" content="송재윤, HCI, CSCW, 연구, 유학, 웹, UI/UX, 인터랙티브, 개발, 스타트업, 서울대, 경영학"> <title>React에서 PropsType Validation하는 법 (v15.5+ 기준) | 재윤 블로그</title> <meta name="generator" content="Jekyll v3.6.2"/> <meta property="og:title" content="React에서 PropsType Validation하는 법 (v15.5+ 기준)"/> <meta name="author" content="jaeyoon"/> <meta property="og:locale" content="ko_KR"/> <meta name="description" content="효과 컴포넌트 클래스의 propTypes 객체를 설정하면, 컴포넌트에서 원하는 props의 type &amp; 전달된 props의 type 이 일치하지 않을 때, 콘솔에서 오류 메시지가 나타나도록 할 수 있다. isRequired로 필수 pr"/> <meta property="og:description" content="효과 컴포넌트 클래스의 propTypes 객체를 설정하면, 컴포넌트에서 원하는 props의 type &amp; 전달된 props의 type 이 일치하지 않을 때, 콘솔에서 오류 메시지가 나타나도록 할 수 있다. isRequired로 필수 pr"/> <link rel="canonical" href="http://blog.jaeyoon.io/2018/01/react-propstype.html"/> <meta property="og:url" content="http://blog.jaeyoon.io/2018/01/react-propstype.html"/> <meta property="og:site_name" content="재윤 블로그"/> <meta property="og:type" content="article"/> <meta property="article:published_time" content="2018-01-11T03:15:30+00:00"/> <script type="application/ld+json">
{"description":"효과 컴포넌트 클래스의 propTypes 객체를 설정하면, 컴포넌트에서 원하는 props의 type &amp; 전달된 props의 type 이 일치하지 않을 때, 콘솔에서 오류 메시지가 나타나도록 할 수 있다. isRequired로 필수 pr","author":{"@type":"Person","name":"jaeyoon"},"@type":"BlogPosting","url":"http://blog.jaeyoon.io/2018/01/react-propstype.html","headline":"React에서 PropsType Validation하는 법 (v15.5+ 기준)","dateModified":"2018-01-11T03:15:30+00:00","datePublished":"2018-01-11T03:15:30+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://blog.jaeyoon.io/2018/01/react-propstype.html"},"@context":"http://schema.org"}</script> <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"> <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"> <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"> <link rel="manifest" href="/manifest.json"> <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#00f0ff"> <meta name="theme-color" content="#000"> <meta property="fb:app_id" content="301590963578753"/> <link rel="stylesheet" href="/assets/main.css"> <link rel="alternate" type="application/rss+xml" title="재윤 블로그" href="/feed.xml"> <script src="https://use.fontawesome.com/1382182da2.js"></script> </head> <body> <header class="site-header" role="banner"> <div class="wrapper"> <div class="col"> <a class="site-title" href="/"> <img src='/assets/img/logo.png' alt="logo"/> </a> <nav class="site-nav"> <input type="checkbox" id="nav-trigger" class="nav-trigger"/> <label for="nav-trigger"> <span class="menu-icon"> </span> </label> <div class="trigger"> <section> <div class="dropdown-wrapper"> <a class="page-link" href="/HCI">HCI</a> <ul class="dropdown"> <li><a href="/연구소개">연구소개</a></li> <li><a href="/유학">유학</a></li> </ul> </div> <div class="dropdown-wrapper"> <a class="page-link" href="/배움">배움</a> <ul class="dropdown"> <li><a href="/개발">개발</a></li> <li><a href="/경영학">경영학</a></li> <li><a href="/독서">독서</a></li> </ul> </div> <div class="dropdown-wrapper"> <a class="page-link" href="/기록">기록</a> <ul class="dropdown"> <li><a href="/생각">생각</a></li> <li><a href="/경험">경험</a></li> </ul> </div> <a class="util-link" href="http://jaeyoon.io"> <u>about</u> </a> <a class="util-link" href="/search"> <u class="hidden-desktop">검색</u> <img src='/assets/img/search.svg' width="15" alt="search"/> </a> </section> <section class="nav-footer hidden-desktop"> <div class="post-subtitle"> <strong>재윤 블로그</strong> <div> <a href="http://jaeyoon.io" target="_blank">포트폴리오 사이트</a> &nbsp; | &nbsp; <a href="https://facebook.com/i.am.jyoon" target="_blank"><i class="fa fa-facebook"></i></a>&nbsp; <a href="https://www.linkedin.com/in/jyoonsong/" target="_blank"><i class="fa fa-linkedin"></i></a>&nbsp; <a href="https://github.com/jyoonsong" target="_blank"><i class="fa fa-github"></i></a>&nbsp; <a href="https://dribbble.com/JaeYoon" target="_blank"><i class="fa fa-dribbble"></i></a>&nbsp; <a href="https://www.instagram.com/jaeyo_on_/" target="_blank"><i class="fa fa-instagram"></i></a> </div> </div> <div class="post-meta">HCI 학도가 생각과 경험을 기록하고 정리하는 공간입니다.</div> </section> </div> </nav> </div> </div> </header> <div id="fb-root"></div> <script async defer crossorigin="anonymous" src="https://connect.facebook.net/ko_KR/sdk.js#xfbml=1&version=v3.3&appId=301590963578753&autoLogAppEvents=1"></script> <article class="post" itemscope itemtype="http://schema.org/BlogPosting"> <section class="page-heading"> <div class="wrapper"> <h1 class="page-title" itemprop="name headline">React에서 PropsType Validation하는 법 (v15.5+ 기준)</h1> <div class="post-meta"> <a href="/배움">배움</a> / <a href="/개발">개발</a> &nbsp;|&nbsp; <time datetime="2018-01-11T03:15:30+00:00" itemprop="datePublished"> 2018.01.11 </time> </div> </div> </section> <main class="page-content" aria-label="Content"> <div class="wrapper"> <div class="post-content" itemprop="articleBody"> <h3 id="효과">효과</h3> <p><strong>컴포넌트 클래스의 <code class="highlighter-rouge">propTypes</code> 객체를 설정</strong>하면,</p> <ul> <li>컴포넌트에서 원하는 props의 type &amp; 전달된 props의 type 이 <em>일치하지 않을 때</em>, 콘솔에서 오류 메시지가 나타나도록 할 수 있다.</li> <li><code class="highlighter-rouge">isRequired</code>로 필수 props를 지정할 수 있다. 즉 props를 <em>지정하지 않으면</em> 콘솔에서 오류 메시지가 나타난다.</li> </ul> <figure> <img data-action="zoom" src="https://velopert.com/wp-content/uploads/2016/03/%EC%9D%B4%EB%AF%B8%EC%A7%80-3-1.png" alt="콘솔의 오류 메시지 예시"/> <figcaption>콘솔의 오류 메시지 예시</figcaption> </figure> <p><br/></p> <h3 id="설치">설치</h3> <blockquote> <p>React v15.5부터는 PropTypes는 deprecated 되고 prop-types라는 다른 패키지로 이동되어, <strong>따로 설치</strong>하지 않으면 에러가 난다. (참고: https://reactjs.org/docs/typechecking-with-proptypes.html)</p> </blockquote> <ul> <li>설치 <code class="highlighter-rouge">npm install —save prop-types</code></li> <li>사용되는 컴포넌트마다 임포트해준다 <code class="highlighter-rouge">import PropTypes from 'prop-types';</code></li> </ul> <p><br/></p> <h3 id="사용">사용</h3> <blockquote> <p>이전 버전의 경우 <code class="highlighter-rouge">title: React.PropTypes.stinrg</code> 처럼 앞에 <code class="highlighter-rouge">React</code>를 붙여줘야 한다. <code class="highlighter-rouge">PropTypes</code>가 <code class="highlighter-rouge">React</code>에서 분리되기 이전이기 때문.</p> </blockquote> <div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// src/components/Content.js</span>
<span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="s1">'react'</span><span class="p">;</span>
 
<span class="kd">class</span> <span class="nx">Content</span> <span class="kd">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
    <span class="nx">render</span><span class="p">(){</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="si">{</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">title</span> <span class="si">}</span><span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span> <span class="si">{</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">body</span> <span class="si">}</span> <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nx">Content</span><span class="p">.</span><span class="nx">propTypes</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">title</span><span class="p">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">string</span><span class="p">,</span>
    <span class="na">body</span><span class="p">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">string</span><span class="p">.</span><span class="nx">isRequired</span>
<span class="p">};</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">Content</span><span class="p">;</span>
</code></pre></div></div> <p>하지만 위처럼 일일이 작성하면 귀찮으니 아래 <a href="https://reactjs.org/docs/typechecking-with-proptypes.html">공식문서의 예시</a>와 같이 Custom Validator 함수를 정의하는 것이 좋은 방법이다. Array 혹은 Object를 사용하는 버전도 있다.</p> <div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">PropTypes</span> <span class="k">from</span> <span class="s1">'prop-types'</span><span class="p">;</span>
<span class="kd">class</span> <span class="nx">MyComponent</span> <span class="kd">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
    <span class="cm">/* ... */</span>
<span class="p">}</span>
<span class="nx">MyComponent</span><span class="p">.</span><span class="nx">propTypes</span> <span class="o">=</span> <span class="p">{</span>
  <span class="c1">// 선언해둔다 (디폴트로 optional)</span>
  <span class="na">optionalArray</span><span class="p">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">array</span><span class="p">,</span>
  <span class="na">optionalBool</span><span class="p">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">bool</span><span class="p">,</span>
  <span class="na">optionalFunc</span><span class="p">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">func</span><span class="p">,</span>
  <span class="na">optionalNumber</span><span class="p">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">number</span><span class="p">,</span>
  <span class="na">optionalObject</span><span class="p">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">object</span><span class="p">,</span>
  <span class="na">optionalString</span><span class="p">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">string</span><span class="p">,</span>
  <span class="na">optionalSymbol</span><span class="p">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">symbol</span><span class="p">,</span>

  <span class="c1">// Anything that can be rendered: numbers, strings, elements or an array (or fragment) containing these types.</span>
  <span class="na">optionalNode</span><span class="p">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">node</span><span class="p">,</span>

  <span class="c1">// A React element.</span>
  <span class="na">optionalElement</span><span class="p">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">element</span><span class="p">,</span>

  <span class="c1">// an instance of a class. This uses JS's instanceof operator.</span>
  <span class="na">optionalMessage</span><span class="p">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">instanceOf</span><span class="p">(</span><span class="nx">Message</span><span class="p">),</span>

  <span class="c1">// ensure that your prop is limited to specific values by treating it as an enum.</span>
  <span class="na">optionalEnum</span><span class="p">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">oneOf</span><span class="p">([</span><span class="s1">'News'</span><span class="p">,</span> <span class="s1">'Photos'</span><span class="p">]),</span>

  <span class="c1">// An object that could be one of many types</span>
  <span class="na">optionalUnion</span><span class="p">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">oneOfType</span><span class="p">([</span>
    <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">string</span><span class="p">,</span>
    <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">number</span><span class="p">,</span>
    <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">instanceOf</span><span class="p">(</span><span class="nx">Message</span><span class="p">)</span>
  <span class="p">]),</span>

  <span class="c1">// An array of a certain type</span>
  <span class="na">optionalArrayOf</span><span class="p">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">arrayOf</span><span class="p">(</span><span class="nx">PropTypes</span><span class="p">.</span><span class="nx">number</span><span class="p">),</span>

  <span class="c1">// An object with property values of a certain type</span>
  <span class="na">optionalObjectOf</span><span class="p">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">objectOf</span><span class="p">(</span><span class="nx">PropTypes</span><span class="p">.</span><span class="nx">number</span><span class="p">),</span>

  <span class="c1">// An object taking on a particular shape</span>
  <span class="na">optionalObjectWithShape</span><span class="p">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">shape</span><span class="p">({</span>
    <span class="na">color</span><span class="p">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">string</span><span class="p">,</span>
    <span class="na">fontSize</span><span class="p">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">number</span>
  <span class="p">}),</span>

  <span class="c1">// 위의 것들 중 어느 것이든 isRequired와 묶을 수 있다</span>
  <span class="na">requiredFunc</span><span class="p">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">func</span><span class="p">.</span><span class="nx">isRequired</span><span class="p">,</span>

  <span class="c1">// 묶지 않고 any data type이지만 isRequired 쓰고플 때</span>
  <span class="na">requiredAny</span><span class="p">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">any</span><span class="p">.</span><span class="nx">isRequired</span><span class="p">,</span>

  <span class="c1">// Custom validator 함수 (기본)</span>
  <span class="c1">// It should return an `Error` object if the validation fails. </span>
  <span class="c1">// Don't `console.warn` or throw, as this won't work inside `oneOfType`.</span>
  <span class="na">customProp</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">props</span><span class="p">,</span> <span class="nx">propName</span><span class="p">,</span> <span class="nx">componentName</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="sr">/matchme/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">props</span><span class="p">[</span><span class="nx">propName</span><span class="p">]))</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span>
        <span class="s1">'Invalid prop `'</span> <span class="o">+</span> <span class="nx">propName</span> <span class="o">+</span> <span class="s1">'` supplied to'</span> <span class="o">+</span>
        <span class="s1">' `'</span> <span class="o">+</span> <span class="nx">componentName</span> <span class="o">+</span> <span class="s1">'`. Validation failed.'</span>
      <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="c1">// Custom validator 함수 (`arrayOf`, `objectOf` 사용 버전)</span>
  <span class="c1">// It should return an `Error` object if the validation fails. </span>
  <span class="c1">// The validator will be called for each key in the array or object. The first two arguments of the validator are the array or object itself, and the current item's key.</span>
  <span class="na">customArrayProp</span><span class="p">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">arrayOf</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">propValue</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">componentName</span><span class="p">,</span> <span class="nx">location</span><span class="p">,</span> <span class="nx">propFullName</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="sr">/matchme/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">propValue</span><span class="p">[</span><span class="nx">key</span><span class="p">]))</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span>
        <span class="s1">'Invalid prop `'</span> <span class="o">+</span> <span class="nx">propFullName</span> <span class="o">+</span> <span class="s1">'` supplied to'</span> <span class="o">+</span>
        <span class="s1">' `'</span> <span class="o">+</span> <span class="nx">componentName</span> <span class="o">+</span> <span class="s1">'`. Validation failed.'</span>
      <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">})</span>
<span class="p">};</span>
</code></pre></div></div> <p><br/></p> <h3 id="ref">Ref</h3> <ul> <li><a href="https://reactjs.org/docs/">React Documentation</a></li> </ul> </div> <div class="post-share"> <div class="post-share-content hidden-tablet"> <h4><strong>글 정보</strong></h4> <div class="post-subtitle">React에서 PropsType Validation하는 법 (v15.5+ 기준) - 커스텀 Validator 함수로 Props의 타입 검증 쉽게 하기</div> <div class="post-meta">2018.01.11</div> </div> <div class="post-share-content"> <h4><strong>태그</strong></h4> <div class="tag">react</div> </div> <div class="post-share-content"> <h4><strong>공유하기</strong></h4> <div class="fb-like" style="line-height: 0.8" data-href="http://blog.jaeyoon.io/2018/01/react-propstype.html" data-layout="button_count" data-action="like" data-size="small" data-show-faces="true" data-share="false"></div> &nbsp; <div class="post-share-btns"> <a href="https://www.facebook.com/sharer/sharer.php?u=http://blog.jaeyoon.io/2018/01/react-propstype.html" onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"> <i class="fa fa-2x fa-facebook-square"></i> </a> <a href="https://twitter.com/intent/tweet?text=React에서 PropsType Validation하는 법 (v15.5+ 기준)&url=http://blog.jaeyoon.io/2018/01/react-propstype.html" onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"> <i class="fa fa-2x fa-twitter-square"></i> </a> <a href="https://plus.google.com/share?url=http://blog.jaeyoon.io/2018/01/react-propstype.html" onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Google+"> <i class="fa fa-2x fa-google-plus-square"></i> </a> <a href="http://pinterest.com/pin/create/button/?url=http://blog.jaeyoon.io/2018/01/react-propstype.html" onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=900,height=500,toolbar=1,resizable=0'); return false;" title="Share on Pinterest"> <i class="fa fa-2x fa-pinterest-square"></i> </a> <a href="https://www.linkedin.com/shareArticle?mini=true&url=http://blog.jaeyoon.io/2018/01/react-propstype.html&title=React에서 PropsType Validation하는 법 (v15.5+ 기준)&summary=&source=재윤 블로그" onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"> <i class="fa fa-2x fa-linkedin-square"></i> </a> </div> </div> </div> <div class="post-comment"> <div class="fb-comments" data-href="http://blog.jaeyoon.io/2018/01/react-propstype.html" data-width="100%" data-numposts="5"></div> </div> </div> </main> </article> <footer class="site-footer"> <div class="wrapper"> <div class="post-subtitle"> <strong>재윤 블로그</strong> <div> <a href="http://jaeyoon.io" target="_blank">포트폴리오 사이트</a> &nbsp; | &nbsp; <a href="https://facebook.com/i.am.jyoon" target="_blank"><i class="fa fa-facebook"></i></a>&nbsp; <a href="https://www.linkedin.com/in/jyoonsong/" target="_blank"><i class="fa fa-linkedin"></i></a>&nbsp; <a href="https://github.com/jyoonsong" target="_blank"><i class="fa fa-github"></i></a>&nbsp; <a href="https://dribbble.com/JaeYoon" target="_blank"><i class="fa fa-dribbble"></i></a>&nbsp; <a href="https://www.instagram.com/jaeyo_on_/" target="_blank"><i class="fa fa-instagram"></i></a> </div> </div> <div class="post-meta">HCI 학도가 생각과 경험을 기록하고 정리하는 공간입니다.</div> </div> </footer> <script src="/assets/js/plugins.js"></script> <script src="/assets/js/main.js"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-113321077-2"></script> <script data-ad-client="ca-pub-4184275208351638" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-113321077-2");</script> </body> </html>